resource "aws_cloudformation_stack" "tfer--awseb-e-k3gyewp8fx-stack" {
  capabilities     = ["CAPABILITY_IAM"]
  disable_rollback = "false"
  name             = "awseb-e-k3gyewp8fx-stack"

  tags = {
    Name                                = "Bookrentalapp-env"
    "elasticbeanstalk:environment-id"   = "e-k3gyewp8fx"
    "elasticbeanstalk:environment-name" = "Bookrentalapp-env"
  }

  tags_all = {
    Name                                = "Bookrentalapp-env"
    "elasticbeanstalk:environment-id"   = "e-k3gyewp8fx"
    "elasticbeanstalk:environment-name" = "Bookrentalapp-env"
  }

  template_body      = "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"AWS Elastic Beanstalk environment (Name: 'Bookrentalapp-env'  Id: 'e-k3gyewp8fx')\",\"Mappings\":{\"AWSEBAWSRegionArch2AMI\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-04c69c563c37ff70e\",\"pv\":\"\"}},\"AWSEBAWSRegionArch2AMIARM\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-0400d70f1608ccd72\",\"pv\":\"\"}},\"AWSEBAWSRegionArch2AMIBase\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-0c496e8bea496ed67\",\"pv\":\"\"}},\"AWSEBAWSRegionArch2AMIBaseARM\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-0d97fa13ebda706b8\",\"pv\":\"\"}},\"AWSEBOptions\":{\"options\":{\"AWSEBHealthdEndpoint\":\"https://elasticbeanstalk-health.eu-west-2.amazonaws.com\",\"AWSEBHealthdGroupId\":\"0d11f46c-870b-467c-b239-18db63074027\",\"CloudConfigOptions\":\"cloud_final_modules:\\n - [scripts-user, always]\",\"CommandBasedLeaderElection\":\"true\",\"DefaultSSHPort\":\"22\",\"DefaultsScript\":\"/opt/elasticbeanstalk/config/private/containercommandsupport/container-defaults.sh\",\"EBSNSTopicArn\":\"\",\"EmbeddedConfigsetsEnabled\":\"true\",\"FastVersionDeployment\":\"true\",\"HaltStartupCommandsOnFailure\":\"true\",\"HealthdProxyLogLocation\":\"\",\"LaunchType\":\"Migration\",\"LeaderTestScript\":\"/opt/elasticbeanstalk/config/private/containercommandsupport/leader-test.sh\",\"OptionDefinitionOverrideEnabled\":true,\"ProxyServer\":\"nginx\",\"ServiceRole\":\"arn:aws:iam::281408736314:role/aws-elasticbeanstalk-service-role\",\"UserDataScript\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/lib/UserDataScript.sh\",\"downloadSourceBundleScriptLocation\":[\"https://s3.eu-west-2.amazonaws.com/elasticbeanstalk-env-resources-eu-west-2/eb_patching_resources/download_source_bundle.py\"],\"ebpatchscripturl\":[\"https://s3.eu-west-2.amazonaws.com/elasticbeanstalk-env-resources-eu-west-2/eb_patching_resources/patch_instance.py\"],\"nodeploymentOnStartup\":\"true\",\"platformAssetsUrl\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144\"}},\"ContainerMeta\":{\"AMIMeta\":{\"AMIName\":\"amzn2-ami-hvm-2.0.20220805.0-x86_64-gp2\",\"AMIVersion\":\"2.0.20220805\",\"Owner\":\"amazon\",\"RepoReleaseVersion\":\"2.0\"}},\"ContainerMetaARM\":{\"AMIMeta\":{\"AMIName\":\"amzn2-ami-hvm-2.0.20220805.0-arm64-gp2\",\"AMIVersion\":\"2.0.20220805\",\"Owner\":\"amazon\",\"RepoReleaseVersion\":\"2.0\"}},\"EnvironmentInfoTasks\":{\"bundle\":{\"AutoClean\":\"true\",\"CommandName\":\"CMD-BundleLogs\",\"LocationPrefix\":\"resources/environments/logs/bundle/\"},\"publish\":{\"LocationPrefix\":\"resources/environments/logs/publish/\"},\"systemtail\":{\"AutoClean\":\"true\",\"CommandName\":\"CMD-SystemTailLogs\",\"LocationPrefix\":\"resources/environments/logs/systemtail/\"},\"tail\":{\"AutoClean\":\"true\",\"CommandName\":\"CMD-TailLogs\",\"LocationPrefix\":\"resources/environments/logs/tail/\"}}},\"Outputs\":{},\"Parameters\":{\"AWSEBAgentId\":{\"Default\":\"\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBEnvironmentBucket\":{\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBEnvironmentId\":{\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBEnvironmentName\":{\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBReferrerId\":{\"Default\":\"\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"AppSource\":{\"Default\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/sampleapp/EBSampleApp-Corretto.zip\",\"Description\":\"The url of the application source.\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"EnvironmentVariables\":{\"Default\":\"M2_HOME=/usr/local/apache-maven,M2=/usr/local/apache-maven/bin,GRADLE_HOME=/usr/local/gradle\",\"Description\":\"Container environment variables.\",\"NoEcho\":\"true\",\"Type\":\"CommaDelimitedList\"},\"HooksPkgUrl\":{\"Default\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/lib/hooks.tar.gz\",\"Description\":\"Hooks package URL\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"InstancePort\":{\"Default\":\"80\",\"Description\":\"Listen Port\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"InstanceType\":{\"ConstraintDescription\":\"must be a valid EC2 instance type.\",\"Description\":\"WebServer EC2 instance type\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"InstanceTypeFamily\":{\"Description\":\"WebServer EC2 instance type family\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"LogPublicationControl\":{\"AllowedValues\":[\"true\",\"false\"],\"ConstraintDescription\":\"must be Boolean.\",\"Default\":\"false\",\"Description\":\"If true customer service logs will be published to S3.\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"ProxyStaticFiles\":{\"Default\":\"\",\"Description\":\"A mapping from virtual path to physical path.\",\"NoEcho\":\"true\",\"Type\":\"CommaDelimitedList\"},\"XRayEnabled\":{\"Default\":\"false\",\"Description\":\"Enables AWS X-Ray for your environment.\",\"NoEcho\":\"true\",\"Type\":\"String\"}},\"Resources\":{\"AWSEBAutoScalingGroup\":{\"DependsOn\":\"AWSEBBeanstalkMetadata\",\"Metadata\":{\"AWS::CloudFormation::Init\":{\"AWSEBBaseConfig\":{\"commands\":{\"clearbackupfiles\":{\"command\":\"cd /opt/elasticbeanstalk/config \\u0026\\u0026 find . -name \\\"*.bak\\\" -type f -delete\"}},\"files\":{\"/opt/elasticbeanstalk/config/ebenvinfo/envbucket\":{\"content\":{\"Ref\":\"AWSEBEnvironmentBucket\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/envid\":{\"content\":{\"Ref\":\"AWSEBEnvironmentId\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/launchwaithandle\":{\"content\":{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/region\":{\"content\":{\"Ref\":\"AWS::Region\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/resource\":{\"content\":\"AWSEBAutoScalingGroup\",\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/healthd/healthdendpoint\":{\"content\":{\"Fn::Join\":[\"\",[\"{\",\"\\\"healthd_endpoint\\\":\",\"\\\"\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdEndpoint\"]},\"\\\"\",\"}\"]]},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/healthd/healthdgroupid\":{\"content\":{\"Fn::Join\":[\"\",[\"{\",\"\\\"groupId\\\":\",\"\\\"\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdGroupId\"]},\"\\\"\",\"}\"]]},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/platformassetsurl\":{\"content\":{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"platformAssetsUrl\"]},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/platformconfig/eventmessages.txt\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/configs/eventmessages.txt\"},\"/opt/elasticbeanstalk/config/platformconfig/generalconfig.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/configs/generalconfig.json\"},\"/opt/elasticbeanstalk/config/platformconfig/guid.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/configs/guid.json\"},\"/opt/elasticbeanstalk/config/platformconfig/packages.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/configs/packages.json\"},\"/opt/elasticbeanstalk/config/platformconfig/platformconfig.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3619.0_20220826002144/configs/platformconfig.json\"}}},\"AWSEBCfnHupEndpointOverride\":{\"commands\":{\"clearbackupfiles\":{\"command\":\"rm -f /etc/cfn/endpoints-override.json.bak*\"}},\"files\":{\"/etc/cfn/endpoints-override.json\":{\"content\":{\"Fn::Join\":[\"\",[\"{\",\"\\n\",\"  \\\"Services\\\": {\",\"\\n\",\"    \\\"AmazonS3\\\": {\",\"\\n\",\"      \\\"Endpoints\\\": [\",\"\\n\",\"          { \\\"Region\\\": \\\"us-east-1\\\", \\\"Hostname\\\": \\\"s3.amazonaws.com\\\", \\\"Default\\\": true },\",\"\\n\",\"          { \\\"Region\\\": \\\"us-east-1\\\", \\\"Hostname\\\": \\\"s3-external-1.amazonaws.com\\\" },\",\"\\n\",\"          { \\\"Region\\\": \\\"us-east-1\\\", \\\"Hostname\\\": \\\"s3-external-2.amazonaws.com\\\" }\",\"\\n\",\"      ]\",\"\\n\",\"    },\",\"\\n\",\"    \\\"AmazonSQS\\\": {\",\"\\n\",\"      \\\"Endpoints\\\": [\",\"\\n\",\"      ]\",\"\\n\",\"    }\",\"\\n\",\"  }\",\"\\n\",\"}\",\"\\n\"]]},\"group\":\"root\",\"mode\":\"000644\",\"owner\":\"root\"}}},\"Hook-PreAppDeploy\":{\"commands\":{\"hooks\":{\"command\":\"echo place holder\"}}},\"InfoTask-BundleLogs\":{\"commands\":{\"bundlelogs\":{\"command\":{\"Fn::Join\":[\"\",[\"bundleLogs.py --conf-path '/opt/elasticbeanstalk/tasks/bundlelogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"bundle\",\"LocationPrefix\"]}]]}}}},\"InfoTask-SystemTailLogs\":{\"commands\":{\"systemtaillogs\":{\"command\":{\"Fn::Join\":[\"\",[\"tailLogs.py --conf-path '/opt/elasticbeanstalk/tasks/systemtaillogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"systemtail\",\"LocationPrefix\"]}]]}}}},\"InfoTask-TailLogs\":{\"commands\":{\"taillogs\":{\"command\":{\"Fn::Join\":[\"\",[\"tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/taillogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"tail\",\"LocationPrefix\"]}]]}}}},\"Infra-InstallContainerHooksPkg\":{\"commands\":{\"00mkdir\":{\"command\":\"mkdir -p /opt/elasticbeanstalk\"},\"01download_container_hooks\":{\"command\":{\"Fn::Join\":[\"\",[\"curl -sS --retry 3 '\",{\"Ref\":\"HooksPkgUrl\"},\"' -o /tmp/hooks.tar.gz\"]]}},\"02install_container_hooks\":{\"command\":\"tar zxf /tmp/hooks.tar.gz --no-same-owner --no-same-permission -C /opt/elasticbeanstalk\"},\"03cleanup\":{\"command\":\"rm -f /tmp/hooks.tar.gz\"}}},\"Infra-PatchInstance\":{\"commands\":{\"01executepatch\":{\"command\":\"/opt/elasticbeanstalk/bin/patch_instance\"}},\"files\":{\"/opt/elasticbeanstalk/bin/patch_instance\":{\"group\":\"root\",\"mode\":\"000750\",\"owner\":\"root\",\"source\":{\"Fn::Select\":[0,{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"ebpatchscripturl\"]}]}}}},\"Infra-WriteApplication1\":{\"commands\":{\"01mkdir\":{\"command\":\"rm -rf /opt/elasticbeanstalk/deploy/appsource/; mkdir -p /opt/elasticbeanstalk/deploy/appsource/\"}}},\"Infra-WriteApplication2\":{\"commands\":{\"01downloadVersion\":{\"command\":\"/opt/elasticbeanstalk/bin/download_source_bundle\"},\"02deleteVersionDownloadScriptFile\":{\"command\":\"rm /opt/elasticbeanstalk/bin/download_source_bundle\"}},\"files\":{\"/opt/elasticbeanstalk/bin/download_source_bundle\":{\"group\":\"root\",\"mode\":\"000750\",\"owner\":\"root\",\"source\":{\"Fn::Select\":[0,{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"downloadSourceBundleScriptLocation\"]}]}}}},\"Infra-WriteBundleLogsConf\":{\"files\":{\"/opt/elasticbeanstalk/tasks/bundlelogs.d/cfn-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cfn-hup*\",\"/var/log/cfn-init*\",\"/var/log/cfn-wire*\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/cloud-init-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cloud-init*\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/eb-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-cfn-init*\",\"/var/log/eb-tools*\",\"/var/log/eb-publish-logs*\",\"/var/log/eb-commandprocessor*\",\"/var/log/eb-activity*\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/eb-version-deployment.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-version-deployment.log\",\"\"]]}},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cron\",\"/var/log/messages\",\"/var/log/yum.log\",\"\"]]},\"mode\":\"000644\"}}},\"Infra-WritePublishLogsConf\":{\"files\":{}},\"Infra-WritePublishLogsCron\":{\"files\":{\"/etc/cron.d/publishlogs\":{\"content\":{\"Fn::Join\":[\"\",[\"SHELL=/bin/bash\",\"\\n\",\"PATH=/sbin:/bin:/usr/sbin:/usr/bin\",\"\\n\",\"MAILTO=\\\"\\\"\",\"\\n\",\"HOME=/\",\"\\n\",\"10,30,50 * * * * root \",\"publishLogs.py --de-dupe --conf-path '/opt/elasticbeanstalk/tasks/publishlogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"publish\",\"LocationPrefix\"]},\" --num-concurrent 2\",\"\\n\",\"05,25,45 * * * * root \",\"clearStaleLogPublishingRecords.py\",\"\\n\"]]},\"mode\":\"000644\"}}},\"Infra-WriteSystemTailLogsConf\":{\"files\":{\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/cfn-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cfn-hup.log\",\"/var/log/cfn-init.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/cloud-init-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cloud-init.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/eb-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-cfn-init.log\",\"/var/log/eb-tools.log\",\"/var/log/eb-publish-logs.log\",\"/var/log/eb-commandprocessor.log\",\"/var/log/eb-activity.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/eb-version-deployment.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-version-deployment.log\",\"\"]]}},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cron\",\"/var/log/messages\",\"/var/log/yum.log\",\"\"]]},\"mode\":\"000644\"}}},\"Infra-WriteTailLogsConf\":{\"files\":{\"/opt/elasticbeanstalk/tasks/taillogs.d/eb-activity.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-commandprocessor.log\",\"/var/log/eb-activity.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/taillogs.d/eb-version-deployment.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-version-deployment.log\",\"\"]]}}}},\"configSets\":{\"Hook-PreAppDeploy\":[\"Hook-PreAppDeploy\"],\"InfoTask-BundleLogs\":[\"InfoTask-BundleLogs\"],\"InfoTask-SystemTailLogs\":[\"InfoTask-SystemTailLogs\"],\"InfoTask-TailLogs\":[\"InfoTask-TailLogs\"],\"Infra-EmbeddedPostBuild\":[],\"Infra-EmbeddedPreBuild\":[],\"Infra-WriteApplication1\":[\"Infra-WriteApplication1\"],\"Infra-WriteApplication2\":[\"Infra-WriteApplication2\"],\"Infra-WriteBundleLogsConf\":[\"Infra-WriteBundleLogsConf\"],\"Infra-WritePublishLogsConf\":[\"Infra-WritePublishLogsConf\"],\"Infra-WritePublishLogsCron\":[\"Infra-WritePublishLogsCron\"],\"Infra-WriteSystemTailLogsConf\":[\"Infra-WriteSystemTailLogsConf\"],\"Infra-WriteTailLogsConf\":[\"Infra-WriteTailLogsConf\"],\"_AppInstall\":[\"Hook-PreAppDeploy\"],\"_Infra-PatchInstance\":[\"Infra-PatchInstance\"],\"_OnInstanceBoot\":[\"AWSEBBaseConfig\",\"AWSEBCfnHupEndpointOverride\"],\"_OnInstanceReboot\":[\"AWSEBBaseConfig\"]}},\"AWS::ElasticBeanstalk::Ext\":{\"AvailabilityZoneCount\":\"Any\",\"InstanceSignalURL\":{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"_API\":{\"_Commands\":{\"CMD-AppDeploy\":{\"_RunStaged\":\"true\",\"_Stages\":{\"01_pre\":[],\"02_enact\":[]}},\"CMD-BundleLogs\":{\"_Stages\":{\"01_enact\":[\"InfoTask-BundleLogs\"]}},\"CMD-ConfigDeploy\":{\"_RunStaged\":\"true\",\"_Stages\":{\"01_pre\":[],\"02_enact\":[]}},\"CMD-PatchInstance\":{\"_Stages\":{\"01_enact\":[\"_Infra-PatchInstance\"]}},\"CMD-RestartAppServer\":{\"_RunStaged\":\"false\",\"_Stages\":{\"01_enact\":[],\"02_enact\":[]}},\"CMD-Startup\":{\"_RunStaged\":\"true\",\"_Stages\":{\"01_pre\":[],\"02_enact\":[]}},\"CMD-SystemTailLogs\":{\"_Stages\":{\"01_enact\":[\"InfoTask-SystemTailLogs\"]}},\"CMD-TailLogs\":{\"_Stages\":{\"01_enact\":[\"InfoTask-TailLogs\"]}}}},\"_AppSourceUrlFileContent\":{\"url\":{\"Ref\":\"AppSource\"}},\"_ContainerConfigFileContent\":{\"commands\":{\"CMD-AppDeploy\":{\"refresh_manifest\":true,\"stages\":[{\"actions\":[{\"name\":\"DownloadSourceBundle\",\"type\":\"infra\",\"value\":\"/opt/elasticbeanstalk/bin/download-source-bundle\"},{\"name\":\"EbExtensionPreBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_prebuild.rb\"},{\"name\":\"AppDeployPreHook\",\"type\":\"hook\",\"value\":\"appdeploy/pre\"},{\"name\":\"EbExtensionPostBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_postbuild.rb\"},{\"name\":\"InfraCleanEbextension\",\"type\":\"infra\",\"value\":\"infra-clean_ebextensions_dir.rb\"}],\"name\":\"AppDeployStage0\"},{\"actions\":[{\"name\":\"AppDeployEnactHook\",\"type\":\"hook\",\"value\":\"appdeploy/enact\"},{\"name\":\"AppDeployPostHook\",\"type\":\"hook\",\"value\":\"appdeploy/post\"}],\"name\":\"AppDeployStage1\"}]},\"CMD-BundleLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"BundleLogs\",\"type\":\"sh\",\"value\":\"bundleLogs.py --conf-path '/opt/elasticbeanstalk/tasks/bundlelogs.d/*' --location-prefix 'resources/environments/logs/bundle/'\"}],\"name\":\"BundleLogs\"}]},\"CMD-ConfigDeploy\":{\"refresh_manifest\":true,\"stages\":[{\"actions\":[{\"name\":\"ConfigDeployPreHook\",\"type\":\"hook\",\"value\":\"configdeploy/pre\"}],\"name\":\"ConfigDeployStage0\"},{\"actions\":[{\"name\":\"ConfigDeployEnactHook\",\"type\":\"hook\",\"value\":\"configdeploy/enact\"},{\"name\":\"ConfigDeployPostHook\",\"type\":\"hook\",\"value\":\"configdeploy/post\"}],\"name\":\"ConfigDeployStage1\"}]},\"CMD-ImmutableDeploymentFlip\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"FlipCommandRegistration\",\"type\":\"infra\",\"value\":\"infra-reregister-cfn-hup.rb\"}],\"name\":\"ImmutableDeploymentFlip\"}]},\"CMD-PreInit\":{\"refresh_manifest\":true,\"stages\":[{\"actions\":[{\"name\":\"DownloadSourceBundle\",\"type\":\"infra\",\"value\":\"/opt/elasticbeanstalk/bin/download-source-bundle\"},{\"name\":\"PreInitHook\",\"type\":\"hook\",\"value\":\"preinit\"}],\"name\":\"PreInitStage0\"}]},\"CMD-PublishLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"PublishLogs\",\"type\":\"sh\",\"value\":\"publishLogs.py --de-dupe --conf-path '/opt/elasticbeanstalk/tasks/publishlogs.d/*' --location-prefix 'resources/environments/logs/publish/' --num-concurrent 2\"}],\"name\":\"PublishLogs\"}]},\"CMD-RestartAppServer\":{\"stages\":[{\"actions\":[{\"name\":\"RestartAppServerPreHook\",\"type\":\"hook\",\"value\":\"restartappserver/pre\"}],\"name\":\"RestartAppServerStage0\"},{\"actions\":[{\"name\":\"RestartAppServerEnactHook\",\"type\":\"hook\",\"value\":\"restartappserver/enact\"},{\"name\":\"RestartAppServerPostHook\",\"type\":\"hook\",\"value\":\"restartappserver/post\"}],\"name\":\"RestartAppServerStage1\"}]},\"CMD-SelfStartup\":{\"stages\":[{\"actions\":[{\"name\":\"HealthdLogRotation\",\"type\":\"infra\",\"value\":\"infra-healthd_log_rotation.rb\"},{\"name\":\"HealthdHTTPDLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_httpd_logging.rb\"},{\"name\":\"HealthdNginxLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_nginx_logging.rb\"},{\"name\":\"EbExtensionPreBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_prebuild.rb\"},{\"name\":\"AppDeployPreHook\",\"type\":\"hook\",\"value\":\"appdeploy/pre\"},{\"name\":\"EbExtensionPostBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_postbuild.rb\"},{\"name\":\"InfraCleanEbextension\",\"type\":\"infra\",\"value\":\"infra-clean_ebextensions_dir.rb\"}],\"name\":\"StartupStage0\"},{\"actions\":[{\"name\":\"AppDeployEnactHook\",\"type\":\"hook\",\"value\":\"appdeploy/enact\"},{\"name\":\"AppDeployPostHook\",\"type\":\"hook\",\"value\":\"appdeploy/post\"},{\"name\":\"PostInitHook\",\"type\":\"hook\",\"value\":\"postinit\"}],\"name\":\"StartupStage1\"}]},\"CMD-Startup\":{\"stages\":[{\"actions\":[{\"name\":\"HealthdLogRotation\",\"type\":\"infra\",\"value\":\"infra-healthd_log_rotation.rb\"},{\"name\":\"HealthdHTTPDLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_httpd_logging.rb\"},{\"name\":\"HealthdNginxLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_nginx_logging.rb\"},{\"name\":\"EbExtensionPreBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_prebuild.rb\"},{\"name\":\"AppDeployPreHook\",\"type\":\"hook\",\"value\":\"appdeploy/pre\"},{\"name\":\"EbExtensionPostBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_postbuild.rb\"},{\"name\":\"InfraCleanEbExtension\",\"type\":\"infra\",\"value\":\"infra-clean_ebextensions_dir.rb\"}],\"name\":\"StartupStage0\"},{\"actions\":[{\"name\":\"AppDeployEnactHook\",\"type\":\"hook\",\"value\":\"appdeploy/enact\"},{\"name\":\"AppDeployPostHook\",\"type\":\"hook\",\"value\":\"appdeploy/post\"},{\"name\":\"PostInitHook\",\"type\":\"hook\",\"value\":\"postinit\"}],\"name\":\"StartupStage1\"}]},\"CMD-SystemTailLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"SystemTailLogs\",\"type\":\"sh\",\"value\":\"tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/systemtaillogs.d/*' --location-prefix 'resources/environments/logs/systemtail/'\"}],\"name\":\"SystemTailLogs\"}]},\"CMD-TailLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"TailLogs\",\"type\":\"sh\",\"value\":\"tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/taillogs.d/*' --location-prefix 'resources/environments/logs/tail/'\"}],\"name\":\"TailLogs\"}]}},\"container\":{\"common_log_list\":[\"/var/log/eb-engine.log\",\"/var/log/eb-hooks.log\"],\"default_log_list\":[\"/var/log/nginx/access.log\",\"/var/log/nginx/error.log\",\"/var/log/web.stdout.log\"],\"environment_name\":{\"Ref\":\"AWSEBEnvironmentName\"},\"instance_port\":{\"Ref\":\"InstancePort\"},\"log_group_name_prefix\":\"/aws/elasticbeanstalk\",\"proxy_server\":\"nginx\",\"static_files\":{\"Ref\":\"ProxyStaticFiles\"},\"xray_enabled\":{\"Ref\":\"XRayEnabled\"}},\"optionsettings\":{\"aws:elasticbeanstalk:application:environment\":{\"Ref\":\"EnvironmentVariables\"},\"aws:elasticbeanstalk:environment:proxy\":{\"StaticFiles\":{\"Ref\":\"ProxyStaticFiles\"}},\"aws:elasticbeanstalk:healthreporting:system\":{\"SystemType\":\"enhanced\"},\"aws:elasticbeanstalk:hostmanager\":{\"LogPublicationControl\":{\"Ref\":\"LogPublicationControl\"}}},\"system\":{\"AWSEBAgentId\":{\"Ref\":\"AWSEBAgentId\"},\"AWSEBReferrerId\":{\"Ref\":\"AWSEBReferrerId\"},\"LogPublicationControl\":{\"Ref\":\"LogPublicationControl\"}}},\"_EnvironmentInfoTaskMapping\":\"EnvironmentInfoTasks\",\"_LaunchS3URL\":\"https://elasticbeanstalk-eu-west-2.s3.eu-west-2.amazonaws.com/environments/508e622a-5510-42b0-9d17-393835d7ca74/launch_control?X-Amz-Algorithm=AWS4-HMAC-SHA256\\u0026X-Amz-Date=20220922T164207Z\\u0026X-Amz-SignedHeaders=host\\u0026X-Amz-Expires=43200\\u0026X-Amz-Credential=AKIAJSAP7YB7UQCRZDBA%2F20220922%2Feu-west-2%2Fs3%2Faws4_request\\u0026X-Amz-Signature=b274e3047f2f55441c507f574077aa9c155bc3a1791900f48f29d9e11301ef8f\",\"_ParameterTriggers\":{\"_TriggerAppDeployment\":[\"AppSource\"],\"_TriggerConfigDeployment\":[\"EnvironmentVariables\",\"InstancePort\",\"LogPublicationControl\",\"XRayEnabled\",\"ProxyStaticFiles\"]},\"_TriggersConfig\":{\"applicationDeploy\":{\"_Command\":\"CMD-AppDeploy\",\"_WatchGroups\":[\"_TriggerAppDeployment\"]},\"configDeploy\":{\"_Command\":\"CMD-ConfigDeploy\",\"_WatchGroups\":[\"_TriggerConfigDeployment\"]}}},\"ForcingMetadataUpdate\":\"Changing something in the metadata will force re-compuation\"},\"Properties\":{\"AvailabilityZones\":[\"eu-west-2c\",\"eu-west-2a\",\"eu-west-2b\"],\"CapacityRebalance\":false,\"Cooldown\":\"360\",\"LaunchTemplate\":{\"LaunchTemplateId\":{\"Ref\":\"AWSEBEC2LaunchTemplate\"},\"Version\":{\"Fn::GetAtt\":[\"AWSEBEC2LaunchTemplate\",\"LatestVersionNumber\"]}},\"MaxSize\":\"4\",\"MinSize\":\"1\",\"Tags\":[{\"Key\":\"elasticbeanstalk:environment-name\",\"PropagateAtLaunch\":true,\"Value\":{\"Ref\":\"AWSEBEnvironmentName\"}},{\"Key\":\"Name\",\"PropagateAtLaunch\":true,\"Value\":{\"Ref\":\"AWSEBEnvironmentName\"}},{\"Key\":\"elasticbeanstalk:environment-id\",\"PropagateAtLaunch\":true,\"Value\":{\"Ref\":\"AWSEBEnvironmentId\"}}],\"TargetGroupARNs\":[{\"Ref\":\"AWSEBV2LoadBalancerTargetGroup\"}]},\"Type\":\"AWS::AutoScaling::AutoScalingGroup\",\"UpdatePolicy\":{\"AutoScalingReplacingUpdate\":{\"WillReplace\":true}}},\"AWSEBAutoScalingScaleDownPolicy\":{\"Properties\":{\"AdjustmentType\":\"ChangeInCapacity\",\"AutoScalingGroupName\":{\"Ref\":\"AWSEBAutoScalingGroup\"},\"ScalingAdjustment\":\"-1\"},\"Type\":\"AWS::AutoScaling::ScalingPolicy\"},\"AWSEBAutoScalingScaleUpPolicy\":{\"Properties\":{\"AdjustmentType\":\"ChangeInCapacity\",\"AutoScalingGroupName\":{\"Ref\":\"AWSEBAutoScalingGroup\"},\"ScalingAdjustment\":\"1\"},\"Type\":\"AWS::AutoScaling::ScalingPolicy\"},\"AWSEBBeanstalkMetadata\":{\"Metadata\":{\"AWS::ElasticBeanstalk::Ext\":{\"Parameters\":{\"AWSEBAgentId\":{\"Ref\":\"AWSEBAgentId\"},\"AWSEBEnvironmentBucket\":{\"Ref\":\"AWSEBEnvironmentBucket\"},\"AWSEBEnvironmentId\":{\"Ref\":\"AWSEBEnvironmentId\"},\"AWSEBEnvironmentName\":{\"Ref\":\"AWSEBEnvironmentName\"},\"AWSEBReferrerId\":{\"Ref\":\"AWSEBReferrerId\"},\"AppSource\":{\"Ref\":\"AppSource\"},\"EnvironmentVariables\":{\"Ref\":\"EnvironmentVariables\"},\"HooksPkgUrl\":{\"Ref\":\"HooksPkgUrl\"},\"InstancePort\":{\"Ref\":\"InstancePort\"},\"InstanceType\":{\"Ref\":\"InstanceType\"},\"InstanceTypeFamily\":{\"Ref\":\"InstanceTypeFamily\"},\"LogPublicationControl\":{\"Ref\":\"LogPublicationControl\"},\"ProxyStaticFiles\":{\"Ref\":\"ProxyStaticFiles\"},\"XRayEnabled\":{\"Ref\":\"XRayEnabled\"}}},\"AWS::ElasticBeanstalk::Metadata\":{\"DateCreated\":\"2022-09-12T12:23:30\",\"DateLastModified\":\"2022-09-22T16:42:07\",\"DateUpdated\":\"2022-09-22T16:42:01\",\"DeploymentVersion\":2,\"EnvironmentId\":\"e-k3gyewp8fx\",\"EnvironmentName\":\"Bookrentalapp-env\",\"Name\":\"e-k3gyewp8fx\",\"RequestId\":\"75445a64-bf07-4e10-9bb8-c73888655866\",\"Version\":\"75445a64-bf07-4e10-9bb8-c73888655866\"}},\"Type\":\"AWS::CloudFormation::WaitConditionHandle\"},\"AWSEBCloudwatchAlarmHigh\":{\"Properties\":{\"AlarmActions\":[{\"Ref\":\"AWSEBAutoScalingScaleUpPolicy\"}],\"AlarmDescription\":\"ElasticBeanstalk Default Scale Up alarm\",\"ComparisonOperator\":\"GreaterThanThreshold\",\"Dimensions\":[{\"Name\":\"AutoScalingGroupName\",\"Value\":{\"Ref\":\"AWSEBAutoScalingGroup\"}}],\"EvaluationPeriods\":\"1\",\"MetricName\":\"NetworkOut\",\"Namespace\":\"AWS/EC2\",\"Period\":\"300\",\"Statistic\":\"Average\",\"Threshold\":\"6000000\"},\"Type\":\"AWS::CloudWatch::Alarm\"},\"AWSEBCloudwatchAlarmLow\":{\"Properties\":{\"AlarmActions\":[{\"Ref\":\"AWSEBAutoScalingScaleDownPolicy\"}],\"AlarmDescription\":\"ElasticBeanstalk Default Scale Down alarm\",\"ComparisonOperator\":\"LessThanThreshold\",\"Dimensions\":[{\"Name\":\"AutoScalingGroupName\",\"Value\":{\"Ref\":\"AWSEBAutoScalingGroup\"}}],\"EvaluationPeriods\":\"1\",\"MetricName\":\"NetworkOut\",\"Namespace\":\"AWS/EC2\",\"Period\":\"300\",\"Statistic\":\"Average\",\"Threshold\":\"2000000\"},\"Type\":\"AWS::CloudWatch::Alarm\"},\"AWSEBEC2LaunchTemplate\":{\"Properties\":{\"LaunchTemplateData\":{\"IamInstanceProfile\":{\"Name\":\"aws-elasticbeanstalk-ec2-role\"},\"ImageId\":{\"Fn::FindInMap\":[\"AWSEBAWSRegionArch2AMI\",{\"Ref\":\"AWS::Region\"},\"hvm\"]},\"InstanceType\":{\"Ref\":\"InstanceType\"},\"MetadataOptions\":{\"HttpPutResponseHopLimit\":1,\"HttpTokens\":\"required\"},\"Monitoring\":{\"Enabled\":false},\"SecurityGroups\":[\"awseb-e-k3gyewp8fx-stack-AWSEBLoadBalancerSecurityGroup-41KELURDMM4J\",\"awseb-e-k3gyewp8fx-stack-AWSEBRDSDBSecurityGroup-PYRSZUGASAKW\",{\"Ref\":\"AWSEBSecurityGroup\"}],\"UserData\":{\"Fn::Base64\":{\"Fn::Join\":[\"\",[\"Content-Type: multipart/mixed; boundary=\\\"===============5189065377222898407==\\\"\",\"\\n\",\"MIME-Version: 1.0\",\"\\n\",\"\",\"\\n\",\"--===============5189065377222898407==\",\"\\n\",\"Content-Type: text/cloud-config; charset=\\\"us-ascii\\\"\",\"\\n\",\"MIME-Version: 1.0\",\"\\n\",\"Content-Transfer-Encoding: 7bit\",\"\\n\",\"Content-Disposition: attachment; filename=\\\"cloud-config.txt\\\"\",\"\\n\",\"\",\"\\n\",\"#cloud-config\",\"\\n\",\"repo_upgrade: none\",\"\\n\",\"repo_releasever: \",{\"Fn::FindInMap\":[\"ContainerMeta\",\"AMIMeta\",\"RepoReleaseVersion\"]},\"\\n\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"CloudConfigOptions\"]},\"\\n\",\"\",\"\\n\",\"--===============5189065377222898407==\",\"\\n\",\"Content-Type: text/x-shellscript; charset=\\\"us-ascii\\\"\",\"\\n\",\"MIME-Version: 1.0\",\"\\n\",\"Content-Transfer-Encoding: 7bit\",\"\\n\",\"Content-Disposition: attachment; filename=\\\"user-data.txt\\\"\",\"\\n\\n\",\"#!/bin/bash\",\"\\n\",\"exec > >(tee -a /var/log/eb-cfn-init.log|logger -t [eb-cfn-init] -s 2>/dev/console) 2>\\u00261\",\"\\n\",\"echo [`date -u +\\\"%Y-%m-%dT%H:%M:%SZ\\\"`] Started EB User Data\",\"\\n\",\"set -x\",\"\\n\",\"\\n\\n\",\"function sleep_delay \",\"\\n\",\"{\",\"\\n\",\"  if (( $SLEEP_TIME < $SLEEP_TIME_MAX )); then \",\"\\n\",\"    echo Sleeping $SLEEP_TIME\",\"\\n\",\"    sleep $SLEEP_TIME  \",\"\\n\",\"    SLEEP_TIME=$(($SLEEP_TIME * 2)) \",\"\\n\",\"  else \",\"\\n\",\"    echo Sleeping $SLEEP_TIME_MAX  \",\"\\n\",\"    sleep $SLEEP_TIME_MAX  \",\"\\n\",\"  fi\",\"\\n\",\"}\",\"\\n\\n\",\"# Executing bootstrap script\",\"\\n\",\"SLEEP_TIME=10\",\"\\n\",\"SLEEP_TIME_MAX=3600\",\"\\n\",\"while true; do \",\"\\n\",\"  curl \",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"UserDataScript\"]},\" > /tmp/ebbootstrap.sh \",\"\\n\",\"  RESULT=$?\",\"\\n\",\"  if [[ \\\"$RESULT\\\" -ne 0 ]]; then \",\"\\n\",\"    sleep_delay \",\"\\n\",\"  else\",\"\\n\",\"    SLEEP_TIME=2\",\"\\n\",\"    /bin/bash /tmp/ebbootstrap.sh \",\"    '\",{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"'\",\"    '\",{\"Ref\":\"AWS::StackId\"},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdGroupId\"]},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdEndpoint\"]},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"HealthdProxyLogLocation\"]},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"platformAssetsUrl\"]},\"'\",\"    '\",{\"Ref\":\"AWS::Region\"},\"'\",\"\\n\",\"    RESULT=$?\",\"\\n\",\"    if [[ \\\"$RESULT\\\" -ne 0 ]]; then \",\"\\n\",\"      sleep_delay \",\"\\n\",\"    else \",\"\\n\",\"      exit 0  \",\"\\n\",\"    fi \",\"\\n\",\"  fi \",\"\\n\",\"done\",\"\\n\\n\",\"--===============5189065377222898407==-- \"]]}}}},\"Type\":\"AWS::EC2::LaunchTemplate\"},\"AWSEBInstanceLaunchWaitCondition\":{\"DependsOn\":\"AWSEBAutoScalingGroup\",\"Properties\":{\"Count\":\"1\",\"Handle\":{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"Timeout\":\"900\"},\"Type\":\"AWS::CloudFormation::WaitCondition\"},\"AWSEBInstanceLaunchWaitHandle\":{\"Type\":\"AWS::CloudFormation::WaitConditionHandle\"},\"AWSEBLoadBalancerSecurityGroup\":{\"Properties\":{\"GroupDescription\":\"Elastic Beanstalk created security group used when no ELB security groups are specified during ELB creation\",\"SecurityGroupEgress\":[{\"CidrIp\":\"0.0.0.0/0\",\"FromPort\":\"80\",\"IpProtocol\":\"tcp\",\"ToPort\":\"80\"}],\"SecurityGroupIngress\":[{\"CidrIp\":\"0.0.0.0/0\",\"FromPort\":\"80\",\"IpProtocol\":\"tcp\",\"ToPort\":\"80\"}],\"VpcId\":\"vpc-020aa58ff51971cb1\"},\"Type\":\"AWS::EC2::SecurityGroup\"},\"AWSEBSecurityGroup\":{\"Properties\":{\"GroupDescription\":\"SecurityGroup for ElasticBeanstalk environment.\",\"SecurityGroupIngress\":[{\"FromPort\":\"80\",\"IpProtocol\":\"tcp\",\"SourceSecurityGroupId\":{\"Ref\":\"AWSEBLoadBalancerSecurityGroup\"},\"ToPort\":\"80\"}]},\"Type\":\"AWS::EC2::SecurityGroup\"},\"AWSEBUpdateWaitConditionCzGTrJ\":{\"DependsOn\":[\"AWSEBV2LoadBalancer\",\"AWSEBV2LoadBalancerListener\",\"AWSEBLoadBalancerSecurityGroup\",\"AWSEBSecurityGroup\",\"AWSEBAutoScalingScaleDownPolicy\",\"AWSEBInstanceLaunchWaitHandle\",\"AWSEBAutoScalingGroup\",\"AWSEBInstanceLaunchWaitCondition\",\"AWSEBAutoScalingScaleUpPolicy\",\"AWSEBEC2LaunchTemplate\",\"AWSEBCloudwatchAlarmHigh\",\"AWSEBBeanstalkMetadata\",\"AWSEBV2LoadBalancerTargetGroup\",\"AWSEBCloudwatchAlarmLow\"],\"Properties\":{\"Count\":\"1\",\"Handle\":{\"Ref\":\"AWSEBUpdateWaitConditionHandleCzGTrJ\"},\"Timeout\":\"43200\"},\"Type\":\"AWS::CloudFormation::WaitCondition\"},\"AWSEBUpdateWaitConditionHandleCzGTrJ\":{\"Type\":\"AWS::CloudFormation::WaitConditionHandle\"},\"AWSEBV2LoadBalancer\":{\"Properties\":{\"SecurityGroups\":[{\"Ref\":\"AWSEBLoadBalancerSecurityGroup\"}],\"Subnets\":[\"subnet-038f9520228d8faa4\",\"subnet-0b49672f2977ea149\",\"subnet-015a2e033d0c2f3eb\"]},\"Type\":\"AWS::ElasticLoadBalancingV2::LoadBalancer\"},\"AWSEBV2LoadBalancerListener\":{\"Properties\":{\"DefaultActions\":[{\"TargetGroupArn\":{\"Ref\":\"AWSEBV2LoadBalancerTargetGroup\"},\"Type\":\"forward\"}],\"LoadBalancerArn\":{\"Ref\":\"AWSEBV2LoadBalancer\"},\"Port\":80,\"Protocol\":\"HTTP\"},\"Type\":\"AWS::ElasticLoadBalancingV2::Listener\"},\"AWSEBV2LoadBalancerTargetGroup\":{\"Properties\":{\"HealthCheckIntervalSeconds\":15,\"HealthCheckPath\":\"/\",\"HealthCheckTimeoutSeconds\":5,\"HealthyThresholdCount\":3,\"Port\":80,\"Protocol\":\"HTTP\",\"TargetGroupAttributes\":[{\"Key\":\"deregistration_delay.timeout_seconds\",\"Value\":\"20\"}],\"UnhealthyThresholdCount\":5,\"VpcId\":\"vpc-020aa58ff51971cb1\"},\"Type\":\"AWS::ElasticLoadBalancingV2::TargetGroup\"}}}"
  timeout_in_minutes = "0"
}

resource "aws_cloudformation_stack" "tfer--awseb-e-mct3qshahg-stack" {
  capabilities     = ["CAPABILITY_IAM"]
  disable_rollback = "false"
  name             = "awseb-e-mct3qshahg-stack"

  tags = {
    Name                                = "env-Backendbookrentalapp"
    "elasticbeanstalk:environment-id"   = "e-mct3qshahg"
    "elasticbeanstalk:environment-name" = "env-Backendbookrentalapp"
  }

  tags_all = {
    Name                                = "env-Backendbookrentalapp"
    "elasticbeanstalk:environment-id"   = "e-mct3qshahg"
    "elasticbeanstalk:environment-name" = "env-Backendbookrentalapp"
  }

  template_body      = "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Description\":\"AWS Elastic Beanstalk environment (Name: 'env-Backendbookrentalapp'  Id: 'e-mct3qshahg')\",\"Mappings\":{\"AWSEBAWSRegionArch2AMI\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-0a600157cc87a6c24\",\"pv\":\"\"}},\"AWSEBAWSRegionArch2AMIARM\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-09d62b746f5eccc48\",\"pv\":\"\"}},\"AWSEBAWSRegionArch2AMIBase\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-060c0d1361bbd1bd7\",\"pv\":\"\"}},\"AWSEBAWSRegionArch2AMIBaseARM\":{\"eu-west-2\":{\"gpu\":\"\",\"graphics\":\"\",\"hvm\":\"ami-00027bdfc115ce035\",\"pv\":\"\"}},\"AWSEBOptions\":{\"options\":{\"AWSEBHealthdEndpoint\":\"https://elasticbeanstalk-health.eu-west-2.amazonaws.com\",\"AWSEBHealthdGroupId\":\"3a3ac733-8dac-4587-a8cb-ac647f6bc510\",\"CloudConfigOptions\":\"cloud_final_modules:\\n - [scripts-user, always]\",\"CommandBasedLeaderElection\":\"true\",\"DefaultSSHPort\":\"22\",\"DefaultsScript\":\"/opt/elasticbeanstalk/config/private/containercommandsupport/container-defaults.sh\",\"EBSNSTopicArn\":\"\",\"EmbeddedConfigsetsEnabled\":\"true\",\"FastVersionDeployment\":\"true\",\"HaltStartupCommandsOnFailure\":\"true\",\"HealthdProxyLogLocation\":\"\",\"LaunchType\":\"Migration\",\"LeaderTestScript\":\"/opt/elasticbeanstalk/config/private/containercommandsupport/leader-test.sh\",\"OptionDefinitionOverrideEnabled\":true,\"ProxyServer\":\"nginx\",\"ServiceRole\":\"arn:aws:iam::281408736314:role/aws-elasticbeanstalk-service-role\",\"UserDataScript\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/lib/UserDataScript.sh\",\"downloadSourceBundleScriptLocation\":[\"https://s3.eu-west-2.amazonaws.com/elasticbeanstalk-env-resources-eu-west-2/eb_patching_resources/download_source_bundle.py\"],\"ebpatchscripturl\":[\"https://s3.eu-west-2.amazonaws.com/elasticbeanstalk-env-resources-eu-west-2/eb_patching_resources/patch_instance.py\"],\"nodeploymentOnStartup\":\"true\",\"platformAssetsUrl\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054\"}},\"ContainerMeta\":{\"AMIMeta\":{\"AMIName\":\"amzn2-ami-hvm-2.0.20221004.0-x86_64-gp2\",\"AMIVersion\":\"2.0.20221004\",\"Owner\":\"amazon\",\"RepoReleaseVersion\":\"2.0\"}},\"ContainerMetaARM\":{\"AMIMeta\":{\"AMIName\":\"amzn2-ami-hvm-2.0.20221004.0-arm64-gp2\",\"AMIVersion\":\"2.0.20221004\",\"Owner\":\"amazon\",\"RepoReleaseVersion\":\"2.0\"}},\"EnvironmentInfoTasks\":{\"bundle\":{\"AutoClean\":\"true\",\"CommandName\":\"CMD-BundleLogs\",\"LocationPrefix\":\"resources/environments/logs/bundle/\"},\"publish\":{\"LocationPrefix\":\"resources/environments/logs/publish/\"},\"systemtail\":{\"AutoClean\":\"true\",\"CommandName\":\"CMD-SystemTailLogs\",\"LocationPrefix\":\"resources/environments/logs/systemtail/\"},\"tail\":{\"AutoClean\":\"true\",\"CommandName\":\"CMD-TailLogs\",\"LocationPrefix\":\"resources/environments/logs/tail/\"}}},\"Outputs\":{},\"Parameters\":{\"AWSEBAgentId\":{\"Default\":\"\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBEnvironmentBucket\":{\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBEnvironmentId\":{\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBEnvironmentName\":{\"NoEcho\":\"true\",\"Type\":\"String\"},\"AWSEBReferrerId\":{\"Default\":\"\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"AppSource\":{\"Default\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/sampleapp/EBSampleApp-Corretto.zip\",\"Description\":\"The url of the application source.\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"EnvironmentVariables\":{\"Default\":\"M2_HOME=/usr/local/apache-maven,M2=/usr/local/apache-maven/bin,GRADLE_HOME=/usr/local/gradle\",\"Description\":\"Container environment variables.\",\"NoEcho\":\"true\",\"Type\":\"CommaDelimitedList\"},\"HooksPkgUrl\":{\"Default\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/lib/hooks.tar.gz\",\"Description\":\"Hooks package URL\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"InstancePort\":{\"Default\":\"80\",\"Description\":\"Listen Port\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"InstanceType\":{\"ConstraintDescription\":\"must be a valid EC2 instance type.\",\"Description\":\"WebServer EC2 instance type\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"InstanceTypeFamily\":{\"Description\":\"WebServer EC2 instance type family\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"LogPublicationControl\":{\"AllowedValues\":[\"true\",\"false\"],\"ConstraintDescription\":\"must be Boolean.\",\"Default\":\"false\",\"Description\":\"If true customer service logs will be published to S3.\",\"NoEcho\":\"true\",\"Type\":\"String\"},\"ProxyStaticFiles\":{\"Default\":\"\",\"Description\":\"A mapping from virtual path to physical path.\",\"NoEcho\":\"true\",\"Type\":\"CommaDelimitedList\"},\"XRayEnabled\":{\"Default\":\"false\",\"Description\":\"Enables AWS X-Ray for your environment.\",\"NoEcho\":\"true\",\"Type\":\"String\"}},\"Resources\":{\"AWSEBAutoScalingGroup\":{\"DependsOn\":\"AWSEBBeanstalkMetadata\",\"Metadata\":{\"AWS::CloudFormation::Init\":{\"AWSEBBaseConfig\":{\"commands\":{\"clearbackupfiles\":{\"command\":\"cd /opt/elasticbeanstalk/config \\u0026\\u0026 find . -name \\\"*.bak\\\" -type f -delete\"}},\"files\":{\"/opt/elasticbeanstalk/config/ebenvinfo/envbucket\":{\"content\":{\"Ref\":\"AWSEBEnvironmentBucket\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/envid\":{\"content\":{\"Ref\":\"AWSEBEnvironmentId\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/launchwaithandle\":{\"content\":{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/region\":{\"content\":{\"Ref\":\"AWS::Region\"},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/ebenvinfo/resource\":{\"content\":\"AWSEBAutoScalingGroup\",\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/healthd/healthdendpoint\":{\"content\":{\"Fn::Join\":[\"\",[\"{\",\"\\\"healthd_endpoint\\\":\",\"\\\"\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdEndpoint\"]},\"\\\"\",\"}\"]]},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/healthd/healthdgroupid\":{\"content\":{\"Fn::Join\":[\"\",[\"{\",\"\\\"groupId\\\":\",\"\\\"\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdGroupId\"]},\"\\\"\",\"}\"]]},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/platformassetsurl\":{\"content\":{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"platformAssetsUrl\"]},\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\"},\"/opt/elasticbeanstalk/config/platformconfig/eventmessages.txt\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/configs/eventmessages.txt\"},\"/opt/elasticbeanstalk/config/platformconfig/generalconfig.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/configs/generalconfig.json\"},\"/opt/elasticbeanstalk/config/platformconfig/guid.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/configs/guid.json\"},\"/opt/elasticbeanstalk/config/platformconfig/packages.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/configs/packages.json\"},\"/opt/elasticbeanstalk/config/platformconfig/platformconfig.json\":{\"group\":\"root\",\"mode\":\"000440\",\"owner\":\"root\",\"source\":\"https://elasticbeanstalk-platform-assets-eu-west-2.s3.eu-west-2.amazonaws.com/stalks/eb_corretto17_amazon_linux_2_1.0.3771.0_20221029051054/configs/platformconfig.json\"}}},\"AWSEBCfnHupEndpointOverride\":{\"commands\":{\"clearbackupfiles\":{\"command\":\"rm -f /etc/cfn/endpoints-override.json.bak*\"}},\"files\":{\"/etc/cfn/endpoints-override.json\":{\"content\":{\"Fn::Join\":[\"\",[\"{\",\"\\n\",\"  \\\"Services\\\": {\",\"\\n\",\"    \\\"AmazonS3\\\": {\",\"\\n\",\"      \\\"Endpoints\\\": [\",\"\\n\",\"          { \\\"Region\\\": \\\"us-east-1\\\", \\\"Hostname\\\": \\\"s3.amazonaws.com\\\", \\\"Default\\\": true },\",\"\\n\",\"          { \\\"Region\\\": \\\"us-east-1\\\", \\\"Hostname\\\": \\\"s3-external-1.amazonaws.com\\\" },\",\"\\n\",\"          { \\\"Region\\\": \\\"us-east-1\\\", \\\"Hostname\\\": \\\"s3-external-2.amazonaws.com\\\" }\",\"\\n\",\"      ]\",\"\\n\",\"    },\",\"\\n\",\"    \\\"AmazonSQS\\\": {\",\"\\n\",\"      \\\"Endpoints\\\": [\",\"\\n\",\"      ]\",\"\\n\",\"    }\",\"\\n\",\"  }\",\"\\n\",\"}\",\"\\n\"]]},\"group\":\"root\",\"mode\":\"000644\",\"owner\":\"root\"}}},\"Hook-PreAppDeploy\":{\"commands\":{\"hooks\":{\"command\":\"echo place holder\"}}},\"InfoTask-BundleLogs\":{\"commands\":{\"bundlelogs\":{\"command\":{\"Fn::Join\":[\"\",[\"bundleLogs.py --conf-path '/opt/elasticbeanstalk/tasks/bundlelogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"bundle\",\"LocationPrefix\"]}]]}}}},\"InfoTask-SystemTailLogs\":{\"commands\":{\"systemtaillogs\":{\"command\":{\"Fn::Join\":[\"\",[\"tailLogs.py --conf-path '/opt/elasticbeanstalk/tasks/systemtaillogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"systemtail\",\"LocationPrefix\"]}]]}}}},\"InfoTask-TailLogs\":{\"commands\":{\"taillogs\":{\"command\":{\"Fn::Join\":[\"\",[\"tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/taillogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"tail\",\"LocationPrefix\"]}]]}}}},\"Infra-InstallContainerHooksPkg\":{\"commands\":{\"00mkdir\":{\"command\":\"mkdir -p /opt/elasticbeanstalk\"},\"01download_container_hooks\":{\"command\":{\"Fn::Join\":[\"\",[\"curl -sS --retry 3 '\",{\"Ref\":\"HooksPkgUrl\"},\"' -o /tmp/hooks.tar.gz\"]]}},\"02install_container_hooks\":{\"command\":\"tar zxf /tmp/hooks.tar.gz --no-same-owner --no-same-permission -C /opt/elasticbeanstalk\"},\"03cleanup\":{\"command\":\"rm -f /tmp/hooks.tar.gz\"}}},\"Infra-PatchInstance\":{\"commands\":{\"01executepatch\":{\"command\":\"/opt/elasticbeanstalk/bin/patch_instance\"}},\"files\":{\"/opt/elasticbeanstalk/bin/patch_instance\":{\"group\":\"root\",\"mode\":\"000750\",\"owner\":\"root\",\"source\":{\"Fn::Select\":[0,{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"ebpatchscripturl\"]}]}}}},\"Infra-WriteApplication1\":{\"commands\":{\"01mkdir\":{\"command\":\"rm -rf /opt/elasticbeanstalk/deploy/appsource/; mkdir -p /opt/elasticbeanstalk/deploy/appsource/\"}}},\"Infra-WriteApplication2\":{\"commands\":{\"01downloadVersion\":{\"command\":\"/opt/elasticbeanstalk/bin/download_source_bundle\"},\"02deleteVersionDownloadScriptFile\":{\"command\":\"rm /opt/elasticbeanstalk/bin/download_source_bundle\"}},\"files\":{\"/opt/elasticbeanstalk/bin/download_source_bundle\":{\"group\":\"root\",\"mode\":\"000750\",\"owner\":\"root\",\"source\":{\"Fn::Select\":[0,{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"downloadSourceBundleScriptLocation\"]}]}}}},\"Infra-WriteBundleLogsConf\":{\"files\":{\"/opt/elasticbeanstalk/tasks/bundlelogs.d/cfn-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cfn-hup*\",\"/var/log/cfn-init*\",\"/var/log/cfn-wire*\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/cloud-init-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cloud-init*\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/eb-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-cfn-init*\",\"/var/log/eb-tools*\",\"/var/log/eb-publish-logs*\",\"/var/log/eb-commandprocessor*\",\"/var/log/eb-activity*\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/eb-version-deployment.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-version-deployment.log\",\"\"]]}},\"/opt/elasticbeanstalk/tasks/bundlelogs.d/system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cron\",\"/var/log/messages\",\"/var/log/yum.log\",\"\"]]},\"mode\":\"000644\"}}},\"Infra-WritePublishLogsConf\":{\"files\":{}},\"Infra-WritePublishLogsCron\":{\"files\":{\"/etc/cron.d/publishlogs\":{\"content\":{\"Fn::Join\":[\"\",[\"SHELL=/bin/bash\",\"\\n\",\"PATH=/sbin:/bin:/usr/sbin:/usr/bin\",\"\\n\",\"MAILTO=\\\"\\\"\",\"\\n\",\"HOME=/\",\"\\n\",\"10,30,50 * * * * root \",\"publishLogs.py --de-dupe --conf-path '/opt/elasticbeanstalk/tasks/publishlogs.d/*' --location-prefix \",{\"Fn::FindInMap\":[\"EnvironmentInfoTasks\",\"publish\",\"LocationPrefix\"]},\" --num-concurrent 2\",\"\\n\",\"05,25,45 * * * * root \",\"clearStaleLogPublishingRecords.py\",\"\\n\"]]},\"mode\":\"000644\"}}},\"Infra-WriteSystemTailLogsConf\":{\"files\":{\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/cfn-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cfn-hup.log\",\"/var/log/cfn-init.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/cloud-init-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cloud-init.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/eb-system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-cfn-init.log\",\"/var/log/eb-tools.log\",\"/var/log/eb-publish-logs.log\",\"/var/log/eb-commandprocessor.log\",\"/var/log/eb-activity.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/eb-version-deployment.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-version-deployment.log\",\"\"]]}},\"/opt/elasticbeanstalk/tasks/systemtaillogs.d/system.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/cron\",\"/var/log/messages\",\"/var/log/yum.log\",\"\"]]},\"mode\":\"000644\"}}},\"Infra-WriteTailLogsConf\":{\"files\":{\"/opt/elasticbeanstalk/tasks/taillogs.d/eb-activity.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-commandprocessor.log\",\"/var/log/eb-activity.log\",\"\"]]},\"mode\":\"000644\"},\"/opt/elasticbeanstalk/tasks/taillogs.d/eb-version-deployment.conf\":{\"content\":{\"Fn::Join\":[\"\\n\",[\"/var/log/eb-version-deployment.log\",\"\"]]}}}},\"configSets\":{\"Hook-PreAppDeploy\":[\"Hook-PreAppDeploy\"],\"InfoTask-BundleLogs\":[\"InfoTask-BundleLogs\"],\"InfoTask-SystemTailLogs\":[\"InfoTask-SystemTailLogs\"],\"InfoTask-TailLogs\":[\"InfoTask-TailLogs\"],\"Infra-EmbeddedPostBuild\":[],\"Infra-EmbeddedPreBuild\":[],\"Infra-WriteApplication1\":[\"Infra-WriteApplication1\"],\"Infra-WriteApplication2\":[\"Infra-WriteApplication2\"],\"Infra-WriteBundleLogsConf\":[\"Infra-WriteBundleLogsConf\"],\"Infra-WritePublishLogsConf\":[\"Infra-WritePublishLogsConf\"],\"Infra-WritePublishLogsCron\":[\"Infra-WritePublishLogsCron\"],\"Infra-WriteSystemTailLogsConf\":[\"Infra-WriteSystemTailLogsConf\"],\"Infra-WriteTailLogsConf\":[\"Infra-WriteTailLogsConf\"],\"_AppInstall\":[\"Hook-PreAppDeploy\"],\"_Infra-PatchInstance\":[\"Infra-PatchInstance\"],\"_OnInstanceBoot\":[\"AWSEBBaseConfig\",\"AWSEBCfnHupEndpointOverride\"],\"_OnInstanceReboot\":[\"AWSEBBaseConfig\"]}},\"AWS::ElasticBeanstalk::Ext\":{\"AvailabilityZoneCount\":\"Any\",\"InstanceSignalURL\":{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"_API\":{\"_Commands\":{\"CMD-AppDeploy\":{\"_RunStaged\":\"true\",\"_Stages\":{\"01_pre\":[],\"02_enact\":[]}},\"CMD-BundleLogs\":{\"_Stages\":{\"01_enact\":[\"InfoTask-BundleLogs\"]}},\"CMD-ConfigDeploy\":{\"_RunStaged\":\"true\",\"_Stages\":{\"01_pre\":[],\"02_enact\":[]}},\"CMD-PatchInstance\":{\"_Stages\":{\"01_enact\":[\"_Infra-PatchInstance\"]}},\"CMD-RestartAppServer\":{\"_RunStaged\":\"false\",\"_Stages\":{\"01_enact\":[],\"02_enact\":[]}},\"CMD-Startup\":{\"_RunStaged\":\"true\",\"_Stages\":{\"01_pre\":[],\"02_enact\":[]}},\"CMD-SystemTailLogs\":{\"_Stages\":{\"01_enact\":[\"InfoTask-SystemTailLogs\"]}},\"CMD-TailLogs\":{\"_Stages\":{\"01_enact\":[\"InfoTask-TailLogs\"]}}}},\"_AppSourceUrlFileContent\":{\"url\":{\"Ref\":\"AppSource\"}},\"_ContainerConfigFileContent\":{\"commands\":{\"CMD-AppDeploy\":{\"refresh_manifest\":true,\"stages\":[{\"actions\":[{\"name\":\"DownloadSourceBundle\",\"type\":\"infra\",\"value\":\"/opt/elasticbeanstalk/bin/download-source-bundle\"},{\"name\":\"EbExtensionPreBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_prebuild.rb\"},{\"name\":\"AppDeployPreHook\",\"type\":\"hook\",\"value\":\"appdeploy/pre\"},{\"name\":\"EbExtensionPostBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_postbuild.rb\"},{\"name\":\"InfraCleanEbextension\",\"type\":\"infra\",\"value\":\"infra-clean_ebextensions_dir.rb\"}],\"name\":\"AppDeployStage0\"},{\"actions\":[{\"name\":\"AppDeployEnactHook\",\"type\":\"hook\",\"value\":\"appdeploy/enact\"},{\"name\":\"AppDeployPostHook\",\"type\":\"hook\",\"value\":\"appdeploy/post\"}],\"name\":\"AppDeployStage1\"}]},\"CMD-BundleLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"BundleLogs\",\"type\":\"sh\",\"value\":\"bundleLogs.py --conf-path '/opt/elasticbeanstalk/tasks/bundlelogs.d/*' --location-prefix 'resources/environments/logs/bundle/'\"}],\"name\":\"BundleLogs\"}]},\"CMD-ConfigDeploy\":{\"refresh_manifest\":true,\"stages\":[{\"actions\":[{\"name\":\"ConfigDeployPreHook\",\"type\":\"hook\",\"value\":\"configdeploy/pre\"}],\"name\":\"ConfigDeployStage0\"},{\"actions\":[{\"name\":\"ConfigDeployEnactHook\",\"type\":\"hook\",\"value\":\"configdeploy/enact\"},{\"name\":\"ConfigDeployPostHook\",\"type\":\"hook\",\"value\":\"configdeploy/post\"}],\"name\":\"ConfigDeployStage1\"}]},\"CMD-ImmutableDeploymentFlip\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"FlipCommandRegistration\",\"type\":\"infra\",\"value\":\"infra-reregister-cfn-hup.rb\"}],\"name\":\"ImmutableDeploymentFlip\"}]},\"CMD-PreInit\":{\"refresh_manifest\":true,\"stages\":[{\"actions\":[{\"name\":\"DownloadSourceBundle\",\"type\":\"infra\",\"value\":\"/opt/elasticbeanstalk/bin/download-source-bundle\"},{\"name\":\"PreInitHook\",\"type\":\"hook\",\"value\":\"preinit\"}],\"name\":\"PreInitStage0\"}]},\"CMD-PublishLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"PublishLogs\",\"type\":\"sh\",\"value\":\"publishLogs.py --de-dupe --conf-path '/opt/elasticbeanstalk/tasks/publishlogs.d/*' --location-prefix 'resources/environments/logs/publish/' --num-concurrent 2\"}],\"name\":\"PublishLogs\"}]},\"CMD-RestartAppServer\":{\"stages\":[{\"actions\":[{\"name\":\"RestartAppServerPreHook\",\"type\":\"hook\",\"value\":\"restartappserver/pre\"}],\"name\":\"RestartAppServerStage0\"},{\"actions\":[{\"name\":\"RestartAppServerEnactHook\",\"type\":\"hook\",\"value\":\"restartappserver/enact\"},{\"name\":\"RestartAppServerPostHook\",\"type\":\"hook\",\"value\":\"restartappserver/post\"}],\"name\":\"RestartAppServerStage1\"}]},\"CMD-SelfStartup\":{\"stages\":[{\"actions\":[{\"name\":\"HealthdLogRotation\",\"type\":\"infra\",\"value\":\"infra-healthd_log_rotation.rb\"},{\"name\":\"HealthdHTTPDLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_httpd_logging.rb\"},{\"name\":\"HealthdNginxLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_nginx_logging.rb\"},{\"name\":\"EbExtensionPreBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_prebuild.rb\"},{\"name\":\"AppDeployPreHook\",\"type\":\"hook\",\"value\":\"appdeploy/pre\"},{\"name\":\"EbExtensionPostBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_postbuild.rb\"},{\"name\":\"InfraCleanEbextension\",\"type\":\"infra\",\"value\":\"infra-clean_ebextensions_dir.rb\"}],\"name\":\"StartupStage0\"},{\"actions\":[{\"name\":\"AppDeployEnactHook\",\"type\":\"hook\",\"value\":\"appdeploy/enact\"},{\"name\":\"AppDeployPostHook\",\"type\":\"hook\",\"value\":\"appdeploy/post\"},{\"name\":\"PostInitHook\",\"type\":\"hook\",\"value\":\"postinit\"}],\"name\":\"StartupStage1\"}]},\"CMD-Startup\":{\"stages\":[{\"actions\":[{\"name\":\"HealthdLogRotation\",\"type\":\"infra\",\"value\":\"infra-healthd_log_rotation.rb\"},{\"name\":\"HealthdHTTPDLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_httpd_logging.rb\"},{\"name\":\"HealthdNginxLogging\",\"type\":\"infra\",\"value\":\"infra-healthd_nginx_logging.rb\"},{\"name\":\"EbExtensionPreBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_prebuild.rb\"},{\"name\":\"AppDeployPreHook\",\"type\":\"hook\",\"value\":\"appdeploy/pre\"},{\"name\":\"EbExtensionPostBuild\",\"type\":\"infra\",\"value\":\"infra-embedded_postbuild.rb\"},{\"name\":\"InfraCleanEbExtension\",\"type\":\"infra\",\"value\":\"infra-clean_ebextensions_dir.rb\"}],\"name\":\"StartupStage0\"},{\"actions\":[{\"name\":\"AppDeployEnactHook\",\"type\":\"hook\",\"value\":\"appdeploy/enact\"},{\"name\":\"AppDeployPostHook\",\"type\":\"hook\",\"value\":\"appdeploy/post\"},{\"name\":\"PostInitHook\",\"type\":\"hook\",\"value\":\"postinit\"}],\"name\":\"StartupStage1\"}]},\"CMD-SystemTailLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"SystemTailLogs\",\"type\":\"sh\",\"value\":\"tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/systemtaillogs.d/*' --location-prefix 'resources/environments/logs/systemtail/'\"}],\"name\":\"SystemTailLogs\"}]},\"CMD-TailLogs\":{\"persistent_configuration\":true,\"stages\":[{\"actions\":[{\"name\":\"TailLogs\",\"type\":\"sh\",\"value\":\"tailLogs.py --concatenate --conf-path '/opt/elasticbeanstalk/tasks/taillogs.d/*' --location-prefix 'resources/environments/logs/tail/'\"}],\"name\":\"TailLogs\"}]}},\"container\":{\"common_log_list\":[\"/var/log/eb-engine.log\",\"/var/log/eb-hooks.log\"],\"default_log_list\":[\"/var/log/nginx/access.log\",\"/var/log/nginx/error.log\",\"/var/log/web.stdout.log\"],\"environment_name\":{\"Ref\":\"AWSEBEnvironmentName\"},\"instance_port\":{\"Ref\":\"InstancePort\"},\"log_group_name_prefix\":\"/aws/elasticbeanstalk\",\"proxy_server\":\"nginx\",\"static_files\":{\"Ref\":\"ProxyStaticFiles\"},\"xray_enabled\":{\"Ref\":\"XRayEnabled\"}},\"optionsettings\":{\"aws:elasticbeanstalk:application:environment\":[\"SERVER_PORT=5000\",\"M2=/usr/local/apache-maven/bin\",\"M2_HOME=/usr/local/apache-maven\",\"GRADLE_HOME=/usr/local/gradle\"],\"aws:elasticbeanstalk:cloudwatch:logs\":{\"StreamLogs\":true},\"aws:elasticbeanstalk:environment:proxy\":{\"StaticFiles\":{\"Ref\":\"ProxyStaticFiles\"}},\"aws:elasticbeanstalk:healthreporting:system\":{\"SystemType\":\"enhanced\"},\"aws:elasticbeanstalk:hostmanager\":{\"LogPublicationControl\":{\"Ref\":\"LogPublicationControl\"}}},\"system\":{\"AWSEBAgentId\":{\"Ref\":\"AWSEBAgentId\"},\"AWSEBReferrerId\":{\"Ref\":\"AWSEBReferrerId\"},\"LogPublicationControl\":{\"Ref\":\"LogPublicationControl\"},\"environment_name\":\"env-Backendbookrentalapp\"}},\"_EnvironmentInfoTaskMapping\":\"EnvironmentInfoTasks\",\"_LaunchS3URL\":\"https://elasticbeanstalk-eu-west-2.s3.eu-west-2.amazonaws.com/environments/dcc481f9-e286-4fef-b0b5-712a232ff49e/launch_control?X-Amz-Algorithm=AWS4-HMAC-SHA256\\u0026X-Amz-Date=20230313T133037Z\\u0026X-Amz-SignedHeaders=host\\u0026X-Amz-Expires=43200\\u0026X-Amz-Credential=AKIAJSAP7YB7UQCRZDBA%2F20230313%2Feu-west-2%2Fs3%2Faws4_request\\u0026X-Amz-Signature=53c822cf439affc3074d90b2b3f2b02be6c9d70402e77f16776f034ad83b4d3d\",\"_ParameterTriggers\":{\"_TriggerAppDeployment\":[\"AppSource\"],\"_TriggerConfigDeployment\":[\"EnvironmentVariables\",\"InstancePort\",\"LogPublicationControl\",\"XRayEnabled\",\"ProxyStaticFiles\"]},\"_TriggersConfig\":{\"applicationDeploy\":{\"_Command\":\"CMD-AppDeploy\",\"_WatchGroups\":[\"_TriggerAppDeployment\"]},\"configDeploy\":{\"_Command\":\"CMD-ConfigDeploy\",\"_WatchGroups\":[\"_TriggerConfigDeployment\"]}}},\"ForcingMetadataUpdate\":\"Changing something in the metadata will force re-compuation\"},\"Properties\":{\"AvailabilityZones\":[\"eu-west-2c\",\"eu-west-2a\",\"eu-west-2b\"],\"CapacityRebalance\":false,\"Cooldown\":\"360\",\"LaunchTemplate\":{\"LaunchTemplateId\":{\"Ref\":\"AWSEBEC2LaunchTemplate\"},\"Version\":{\"Fn::GetAtt\":[\"AWSEBEC2LaunchTemplate\",\"LatestVersionNumber\"]}},\"MaxSize\":\"4\",\"MinSize\":\"1\",\"Tags\":[{\"Key\":\"elasticbeanstalk:environment-name\",\"PropagateAtLaunch\":true,\"Value\":{\"Ref\":\"AWSEBEnvironmentName\"}},{\"Key\":\"Name\",\"PropagateAtLaunch\":true,\"Value\":{\"Ref\":\"AWSEBEnvironmentName\"}},{\"Key\":\"elasticbeanstalk:environment-id\",\"PropagateAtLaunch\":true,\"Value\":{\"Ref\":\"AWSEBEnvironmentId\"}}],\"TargetGroupARNs\":[{\"Ref\":\"AWSEBV2LoadBalancerTargetGroup\"}]},\"Type\":\"AWS::AutoScaling::AutoScalingGroup\",\"UpdatePolicy\":{\"AutoScalingReplacingUpdate\":{\"WillReplace\":true}}},\"AWSEBAutoScalingScaleDownPolicy\":{\"Properties\":{\"AdjustmentType\":\"ChangeInCapacity\",\"AutoScalingGroupName\":{\"Ref\":\"AWSEBAutoScalingGroup\"},\"ScalingAdjustment\":\"-1\"},\"Type\":\"AWS::AutoScaling::ScalingPolicy\"},\"AWSEBAutoScalingScaleUpPolicy\":{\"Properties\":{\"AdjustmentType\":\"ChangeInCapacity\",\"AutoScalingGroupName\":{\"Ref\":\"AWSEBAutoScalingGroup\"},\"ScalingAdjustment\":\"1\"},\"Type\":\"AWS::AutoScaling::ScalingPolicy\"},\"AWSEBBeanstalkMetadata\":{\"Metadata\":{\"AWS::ElasticBeanstalk::Ext\":{\"Parameters\":{\"AWSEBAgentId\":{\"Ref\":\"AWSEBAgentId\"},\"AWSEBEnvironmentBucket\":{\"Ref\":\"AWSEBEnvironmentBucket\"},\"AWSEBEnvironmentId\":{\"Ref\":\"AWSEBEnvironmentId\"},\"AWSEBEnvironmentName\":{\"Ref\":\"AWSEBEnvironmentName\"},\"AWSEBReferrerId\":{\"Ref\":\"AWSEBReferrerId\"},\"AppSource\":{\"Ref\":\"AppSource\"},\"EnvironmentVariables\":{\"Ref\":\"EnvironmentVariables\"},\"HooksPkgUrl\":{\"Ref\":\"HooksPkgUrl\"},\"InstancePort\":{\"Ref\":\"InstancePort\"},\"InstanceType\":{\"Ref\":\"InstanceType\"},\"InstanceTypeFamily\":{\"Ref\":\"InstanceTypeFamily\"},\"LogPublicationControl\":{\"Ref\":\"LogPublicationControl\"},\"ProxyStaticFiles\":{\"Ref\":\"ProxyStaticFiles\"},\"XRayEnabled\":{\"Ref\":\"XRayEnabled\"}}},\"AWS::ElasticBeanstalk::Metadata\":{\"DateCreated\":\"2022-09-25T13:28:15\",\"DateLastModified\":\"2023-03-13T13:30:37\",\"DateUpdated\":\"2023-03-13T13:30:32\",\"DeploymentVersion\":2,\"EnvironmentId\":\"e-mct3qshahg\",\"EnvironmentName\":\"env-Backendbookrentalapp\",\"Name\":\"e-mct3qshahg\",\"RequestId\":\"3b37801c-47c9-4a12-b187-7865345c19cf\",\"Version\":\"3b37801c-47c9-4a12-b187-7865345c19cf\"}},\"Type\":\"AWS::CloudFormation::WaitConditionHandle\"},\"AWSEBCloudwatchAlarmHigh\":{\"Properties\":{\"AlarmActions\":[{\"Ref\":\"AWSEBAutoScalingScaleUpPolicy\"}],\"AlarmDescription\":\"ElasticBeanstalk Default Scale Up alarm\",\"ComparisonOperator\":\"GreaterThanThreshold\",\"Dimensions\":[{\"Name\":\"AutoScalingGroupName\",\"Value\":{\"Ref\":\"AWSEBAutoScalingGroup\"}}],\"EvaluationPeriods\":\"1\",\"MetricName\":\"NetworkOut\",\"Namespace\":\"AWS/EC2\",\"Period\":\"300\",\"Statistic\":\"Average\",\"Threshold\":\"6000000\"},\"Type\":\"AWS::CloudWatch::Alarm\"},\"AWSEBCloudwatchAlarmLow\":{\"Properties\":{\"AlarmActions\":[{\"Ref\":\"AWSEBAutoScalingScaleDownPolicy\"}],\"AlarmDescription\":\"ElasticBeanstalk Default Scale Down alarm\",\"ComparisonOperator\":\"LessThanThreshold\",\"Dimensions\":[{\"Name\":\"AutoScalingGroupName\",\"Value\":{\"Ref\":\"AWSEBAutoScalingGroup\"}}],\"EvaluationPeriods\":\"1\",\"MetricName\":\"NetworkOut\",\"Namespace\":\"AWS/EC2\",\"Period\":\"300\",\"Statistic\":\"Average\",\"Threshold\":\"2000000\"},\"Type\":\"AWS::CloudWatch::Alarm\"},\"AWSEBEC2LaunchTemplate\":{\"Properties\":{\"LaunchTemplateData\":{\"IamInstanceProfile\":{\"Name\":\"aws-elasticbeanstalk-ec2-role\"},\"ImageId\":{\"Fn::FindInMap\":[\"AWSEBAWSRegionArch2AMI\",{\"Ref\":\"AWS::Region\"},\"hvm\"]},\"InstanceType\":{\"Ref\":\"InstanceType\"},\"MetadataOptions\":{\"HttpPutResponseHopLimit\":1,\"HttpTokens\":\"required\"},\"Monitoring\":{\"Enabled\":false},\"SecurityGroups\":[{\"Ref\":\"AWSEBSecurityGroup\"}],\"UserData\":{\"Fn::Base64\":{\"Fn::Join\":[\"\",[\"Content-Type: multipart/mixed; boundary=\\\"===============5189065377222898407==\\\"\",\"\\n\",\"MIME-Version: 1.0\",\"\\n\",\"\",\"\\n\",\"--===============5189065377222898407==\",\"\\n\",\"Content-Type: text/cloud-config; charset=\\\"us-ascii\\\"\",\"\\n\",\"MIME-Version: 1.0\",\"\\n\",\"Content-Transfer-Encoding: 7bit\",\"\\n\",\"Content-Disposition: attachment; filename=\\\"cloud-config.txt\\\"\",\"\\n\",\"\",\"\\n\",\"#cloud-config\",\"\\n\",\"repo_upgrade: none\",\"\\n\",\"repo_releasever: \",{\"Fn::FindInMap\":[\"ContainerMeta\",\"AMIMeta\",\"RepoReleaseVersion\"]},\"\\n\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"CloudConfigOptions\"]},\"\\n\",\"\",\"\\n\",\"--===============5189065377222898407==\",\"\\n\",\"Content-Type: text/x-shellscript; charset=\\\"us-ascii\\\"\",\"\\n\",\"MIME-Version: 1.0\",\"\\n\",\"Content-Transfer-Encoding: 7bit\",\"\\n\",\"Content-Disposition: attachment; filename=\\\"user-data.txt\\\"\",\"\\n\\n\",\"#!/bin/bash\",\"\\n\",\"exec > >(tee -a /var/log/eb-cfn-init.log|logger -t [eb-cfn-init] -s 2>/dev/console) 2>\\u00261\",\"\\n\",\"echo [`date -u +\\\"%Y-%m-%dT%H:%M:%SZ\\\"`] Started EB User Data\",\"\\n\",\"set -x\",\"\\n\",\"\\n\\n\",\"function sleep_delay \",\"\\n\",\"{\",\"\\n\",\"  if (( $SLEEP_TIME < $SLEEP_TIME_MAX )); then \",\"\\n\",\"    echo Sleeping $SLEEP_TIME\",\"\\n\",\"    sleep $SLEEP_TIME  \",\"\\n\",\"    SLEEP_TIME=$(($SLEEP_TIME * 2)) \",\"\\n\",\"  else \",\"\\n\",\"    echo Sleeping $SLEEP_TIME_MAX  \",\"\\n\",\"    sleep $SLEEP_TIME_MAX  \",\"\\n\",\"  fi\",\"\\n\",\"}\",\"\\n\\n\",\"# Executing bootstrap script\",\"\\n\",\"SLEEP_TIME=2\",\"\\n\",\"SLEEP_TIME_MAX=3600\",\"\\n\",\"while true; do \",\"\\n\",\"  curl \",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"UserDataScript\"]},\" > /tmp/ebbootstrap.sh \",\"\\n\",\"  RESULT=$?\",\"\\n\",\"  if [[ \\\"$RESULT\\\" -ne 0 ]]; then \",\"\\n\",\"    sleep_delay \",\"\\n\",\"  else\",\"\\n\",\"    /bin/bash /tmp/ebbootstrap.sh \",\"    '\",{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"'\",\"    '\",{\"Ref\":\"AWS::StackId\"},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdGroupId\"]},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"AWSEBHealthdEndpoint\"]},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"HealthdProxyLogLocation\"]},\"'\",\"    '\",{\"Fn::FindInMap\":[\"AWSEBOptions\",\"options\",\"platformAssetsUrl\"]},\"'\",\"    '\",{\"Ref\":\"AWS::Region\"},\"'\",\"\\n\",\"    RESULT=$?\",\"\\n\",\"    if [[ \\\"$RESULT\\\" -ne 0 ]]; then \",\"\\n\",\"      sleep_delay \",\"\\n\",\"    else \",\"\\n\",\"      exit 0  \",\"\\n\",\"    fi \",\"\\n\",\"  fi \",\"\\n\",\"done\",\"\\n\\n\",\"--===============5189065377222898407==-- \"]]}}}},\"Type\":\"AWS::EC2::LaunchTemplate\"},\"AWSEBInstanceLaunchWaitCondition\":{\"DependsOn\":\"AWSEBAutoScalingGroup\",\"Properties\":{\"Count\":\"1\",\"Handle\":{\"Ref\":\"AWSEBInstanceLaunchWaitHandle\"},\"Timeout\":\"900\"},\"Type\":\"AWS::CloudFormation::WaitCondition\"},\"AWSEBInstanceLaunchWaitHandle\":{\"Type\":\"AWS::CloudFormation::WaitConditionHandle\"},\"AWSEBLoadBalancerSecurityGroup\":{\"Properties\":{\"GroupDescription\":\"Elastic Beanstalk created security group used when no ELB security groups are specified during ELB creation\",\"SecurityGroupEgress\":[{\"CidrIp\":\"0.0.0.0/0\",\"FromPort\":\"80\",\"IpProtocol\":\"tcp\",\"ToPort\":\"80\"}],\"SecurityGroupIngress\":[{\"CidrIp\":\"0.0.0.0/0\",\"FromPort\":\"80\",\"IpProtocol\":\"tcp\",\"ToPort\":\"80\"}],\"VpcId\":\"vpc-020aa58ff51971cb1\"},\"Type\":\"AWS::EC2::SecurityGroup\"},\"AWSEBSecurityGroup\":{\"Properties\":{\"GroupDescription\":\"SecurityGroup for ElasticBeanstalk environment.\",\"SecurityGroupIngress\":[{\"FromPort\":\"80\",\"IpProtocol\":\"tcp\",\"SourceSecurityGroupId\":{\"Ref\":\"AWSEBLoadBalancerSecurityGroup\"},\"ToPort\":\"80\"}]},\"Type\":\"AWS::EC2::SecurityGroup\"},\"AWSEBUpdateWaitConditionHandlehhOKCC\":{\"Type\":\"AWS::CloudFormation::WaitConditionHandle\"},\"AWSEBUpdateWaitConditionhhOKCC\":{\"DependsOn\":[\"AWSEBV2LoadBalancer\",\"AWSEBV2LoadBalancerListener\",\"AWSEBLoadBalancerSecurityGroup\",\"AWSEBSecurityGroup\",\"AWSEBAutoScalingScaleDownPolicy\",\"AWSEBInstanceLaunchWaitHandle\",\"AWSEBAutoScalingGroup\",\"AWSEBInstanceLaunchWaitCondition\",\"AWSEBAutoScalingScaleUpPolicy\",\"AWSEBEC2LaunchTemplate\",\"AWSEBCloudwatchAlarmHigh\",\"AWSEBBeanstalkMetadata\",\"AWSEBV2LoadBalancerTargetGroup\",\"AWSEBCloudwatchAlarmLow\"],\"Properties\":{\"Count\":\"1\",\"Handle\":{\"Ref\":\"AWSEBUpdateWaitConditionHandlehhOKCC\"},\"Timeout\":\"43200\"},\"Type\":\"AWS::CloudFormation::WaitCondition\"},\"AWSEBV2LoadBalancer\":{\"Properties\":{\"SecurityGroups\":[{\"Ref\":\"AWSEBLoadBalancerSecurityGroup\"}],\"Subnets\":[\"subnet-038f9520228d8faa4\",\"subnet-0b49672f2977ea149\",\"subnet-015a2e033d0c2f3eb\"]},\"Type\":\"AWS::ElasticLoadBalancingV2::LoadBalancer\"},\"AWSEBV2LoadBalancerListener\":{\"Properties\":{\"DefaultActions\":[{\"TargetGroupArn\":{\"Ref\":\"AWSEBV2LoadBalancerTargetGroup\"},\"Type\":\"forward\"}],\"LoadBalancerArn\":{\"Ref\":\"AWSEBV2LoadBalancer\"},\"Port\":80,\"Protocol\":\"HTTP\"},\"Type\":\"AWS::ElasticLoadBalancingV2::Listener\"},\"AWSEBV2LoadBalancerTargetGroup\":{\"Properties\":{\"HealthCheckIntervalSeconds\":15,\"HealthCheckPath\":\"/\",\"HealthCheckTimeoutSeconds\":5,\"HealthyThresholdCount\":3,\"Port\":80,\"Protocol\":\"HTTP\",\"TargetGroupAttributes\":[{\"Key\":\"deregistration_delay.timeout_seconds\",\"Value\":\"20\"}],\"UnhealthyThresholdCount\":5,\"VpcId\":\"vpc-020aa58ff51971cb1\"},\"Type\":\"AWS::ElasticLoadBalancingV2::TargetGroup\"}}}"
  timeout_in_minutes = "0"
}
